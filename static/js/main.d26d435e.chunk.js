(this["webpackJsonpsuperpowered-examples"]=this["webpackJsonpsuperpowered-examples"]||[]).push([[0],{19:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return SuperpoweredGlue}));var _Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17),_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(15),memoryUsageListener=null,SuperpoweredGlue=function(){function SuperpoweredGlue(){Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,SuperpoweredGlue),this.id=Math.floor(Math.random()*Date.now()),this.linearMemory=null,this.__lastObject__=null,this.__classUnderConstruction__=null,this.__functions__={},this.__classes__={},this.__exportsToWasm__={},this.__views__=new Set;var glue=this;this.Uint8Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(1,glue.malloc(r),r)}}(),this.Int8Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(2,glue.malloc(r),r)}}(),this.Uint16Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(3,glue.malloc(2*r),r)}}(),this.Int16Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(4,glue.malloc(2*r),r)}}(),this.Uint32Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(5,glue.malloc(4*r),r)}}(),this.Int32Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(6,glue.malloc(4*r),r)}}(),this.BigUint64Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(7,glue.malloc(8*r),r)}}(),this.BigInt64Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(8,glue.malloc(8*r),r)}}(),this.Float32Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(9,glue.malloc(4*r),r)}}(),this.Float64Buffer=function(){return function e(r){return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e),glue.createViewFromType(10,glue.malloc(8*r),r)}}(),this.__exportsToWasm__.consolelog=this.consolelog.bind(this),this.__exportsToWasm__.emscripten_notify_memory_growth=this.onMemoryGrowth.bind(this),this.__exportsToWasm__.__createClass__=this.createClass.bind(this),this.__exportsToWasm__.__createStaticProperty__=this.createStaticProperty.bind(this),this.__exportsToWasm__.__createStaticMethod__=this.createStaticMethod.bind(this),this.__exportsToWasm__.__createConstructor__=this.createConstructor.bind(this),this.__exportsToWasm__.__createDestructor__=this.createDestructor.bind(this),this.__exportsToWasm__.__createProperty__=this.createProperty.bind(this),this.__exportsToWasm__.__createMethod__=this.createMethod.bind(this),this.__exportsToWasm__.__createFunction__=this.createFunction.bind(this),this.__exportsToWasm__.__createClassConstant__=this.createClassConstant.bind(this),this.__exportsToWasm__.__createConstant__=this.createConstant.bind(this),this.__exportsToWasm__.__runjs__=function(pointer){return eval(this.toString(pointer))}.bind(this),this.__exportsToWasm__.abs=function(e){return Math.abs(e)},this.__exportsToWasm__.round=function(e){return Math.round(e)},this.__exportsToWasm__.roundf=function(e){return Math.fround(e)},this.wasi={proc_exit:function(){console.log("abort")}}}return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(SuperpoweredGlue,[{key:"niceSize",value:function(e){if(0==e)return"0 byte";if(1==e)return"1 byte";var r=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,r),2)+[" bytes"," kb"," mb"," gb"," tb"][r]}},{key:"createFloatArray",value:function(e){return this.createViewFromType(9,this.malloc(4*e),e)}},{key:"updateBuffer",value:function(e,r){switch(e.__arraybuffer__=r,e.__type__){case 1:e.array=new Uint8Array(e.__arraybuffer__,e.pointer,e.length<0?e.__arraybuffer__.byteLength-e.pointer:e.length);break;case 2:e.array=new Int8Array(e.__arraybuffer__,e.pointer,e.length<0?e.__arraybuffer__.byteLength-e.pointer:e.length);break;case 3:e.array=new Uint16Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/2:e.length);break;case 4:e.array=new Int16Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/2:e.length);break;case 5:e.array=new Uint32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 6:e.array=new Int32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 7:e.array=new BigUint64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length);break;case 8:e.array=new BigInt64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length);break;case 9:e.array=new Float32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 10:e.array=new Float64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length)}}},{key:"createViewFromType",value:function(e,r,t){var _={pointer:r,length:t,__arraybuffer__:this.linearMemory,__type__:e,__glue__:this,free:function(){this.__glue__.free(this.pointer);var e=this;Object.getOwnPropertyNames(e).forEach((function(r){delete e[r]})),Object.setPrototypeOf(e,null)}};return this.updateBuffer(_,this.linearMemory),this.__views__.add(_),_}},{key:"returnPointerToView",value:function(e,r){if(r>0&&void 0!==typeof e){var t=this.__functions__.__lastarraylength__();e=this.createViewFromType(r,e,t>0?t:-1)}return e}},{key:"invokeMethod",value:function(){if(2==arguments.length&&"object"==typeof arguments[1]){var e=arguments[1],r=1;for(var t in e)arguments[r++]=e[t];arguments.length=r}for(var _=[],o=arguments.length-1;o>0;o--)void 0!=arguments[o].array?arguments[o]=arguments[o].array.byteOffset:"string"==typeof arguments[o]&&(arguments[o]=this.__glue__.toWASMString(arguments[o]),_.push(arguments[o]));var n=arguments[0];arguments[0]=this.__pointer__;for(var a=n.function.apply(this,arguments),s=0,i=_;s<i.length;s++){var u=i[s];this.__glue__.free(u)}return a=this.__glue__.returnPointerToView(a,n.returnPointerType)}},{key:"invokeFunction",value:function(){if(1==arguments.length&&"object"==typeof arguments[0]){var e=arguments[0],r=0;for(var t in e)arguments[r++]=e[t];arguments.length=r}for(var _=[],o=arguments.length-1;o>=0;o--)void 0!=arguments[o].array?arguments[o]=arguments[o].array.byteOffset:"string"==typeof arguments[o]&&(arguments[o]=this.glue.toWASMString(arguments[o]),_.push(arguments[o]));for(var n=this.apply(this,arguments),a=0,s=_;a<s.length;a++){var i=s[a];this.glue.free(i)}return n=this.glue.returnPointerToView(n,this.returnPointerType)}},{key:"invokeExportedFunction",value:function(){var e=this.apply(this,arguments);return void 0!==typeof e.array&&(e=e.array.byteOffset),e}},{key:"createClass",value:function(e,r,t){var _=this,o=_.toString(e,r),n=function(){function e(){Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,e);var r=Object.getPrototypeOf(this).constructor.__meta__;if(!r.hasConstructor)throw r.name+" has no constructor";this.__class__=r.name,this.__prev__=_.__lastObject__,null!=_.__lastObject__&&(_.__lastObject__.__next__=this),this.__next__=null,this.__glue__=_,_.__lastObject__=this;var t=[].slice.call(arguments);t.unshift(_.malloc(r.size)),this.__pointer__=_[r.name+"::"+r.name].apply(null,t);var o,n=Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(r.properties);try{for(n.s();!(o=n.n()).done;){var a=o.value;_.createPropertyFromDescriptor(this,a)}}catch(c){n.e(c)}finally{n.f()}var s,i=Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(r.methods);try{for(i.s();!(s=i.n()).done;){var u=s.value;this[u.name]=_.invokeMethod.bind(this,{function:_[u.wasmFunction],returnPointerType:u.returnPointerType})}}catch(c){i.e(c)}finally{i.f()}}return Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(e,[{key:"destruct",value:function(){var e=Object.getPrototypeOf(this).constructor.__meta__;e.hasDestructor&&_[e.name+"::~"+e.name](this.__pointer__),_.free(this.__pointer__),null!=this.__prev__&&(this.__prev__.__next__=this.__next__),null!=this.__next__&&(this.__next__.__prev__=this.__prev__);var r=this;Object.getOwnPropertyNames(r).forEach((function(e){delete r[e]})),Object.setPrototypeOf(r,null)}}]),e}();_.__classUnderConstruction__=_.__classes__[o]=_[o]=n,_.__classUnderConstruction__.__meta__={name:o,size:t,hasConstructor:!1,hasDestructor:!1,properties:[],methods:[],staticProperties:[]},delete _.__functionsWithNamespace__[o]}},{key:"createConstructor",value:function(){this.__classUnderConstruction__.__meta__.hasConstructor=!0}},{key:"createDestructor",value:function(){this.__classUnderConstruction__.__meta__.hasDestructor=this.__classUnderConstruction__.__meta__.hasConstructor}},{key:"createClassConstant",value:function(e,r,t){var _=this.toString(e,r);this.__classUnderConstruction__[_]=t}},{key:"createConstant",value:function(e,r,t){this[this.toString(e,r)]=t}},{key:"createPropertyFromDescriptor",value:function(e,r){var t=this.createViewFromType(r.viewType,e.__pointer__+r.offset,r.viewLength);r.viewLength>1?Object.defineProperty(e,r.name,{get:function(){return t.array},set:function(e){t.array[index]=e},configurable:!0,enumerable:!0}):Object.defineProperty(e,r.name,{get:function(){return t.array[0]},set:function(e){t.array[0]=e},configurable:!0,enumerable:!0})}},{key:"createProperty",value:function(e,r,t,_,o){var n={name:this.toString(e,r),offset:t,viewType:_,viewLength:o};this.__classUnderConstruction__.__meta__.properties.push(n)}},{key:"createStaticPropertyFromDescriptor",value:function(e,r){var t=this.createViewFromType(r.viewType,r.pointer,r.viewLength);r.viewLength>1?Object.defineProperty(e,r.name,{get:function(){return t.array},set:function(e){t.array[index]=e},configurable:!0,enumerable:!0}):Object.defineProperty(e,r.name,{get:function(){return t.array[0]},set:function(e){t.array[0]=e},configurable:!0,enumerable:!0})}},{key:"createStaticProperty",value:function(e,r,t,_,o){var n={name:this.toString(e,r),pointer:t,viewType:_,viewLength:o};this.__classUnderConstruction__.__meta__.staticProperties.push(n),this.createStaticPropertyFromDescriptor(this.__classUnderConstruction__,n)}},{key:"createMethod",value:function(e,r,t){var _=this.toString(e,r),o=this.__classUnderConstruction__.__meta__.name+"::"+_;this.__classUnderConstruction__.__meta__.methods.push({name:_,wasmFunction:o,returnPointerType:t})}},{key:"createStaticMethod",value:function(e,r,t){var _=this.toString(e,r),o=this.__classUnderConstruction__.__meta__.name+"::"+_;this[o].returnPointerType=t,this[o].glue=this,this.__classUnderConstruction__[_]=this.invokeFunction.bind(this[o])}},{key:"createFunction",value:function(e,r,t){var _=this.toString(e,r);if(!this[_]){for(var o in this.__functionsWithNamespace__)if(this.__functionsWithNamespace__[o][_]){this[_]=this.__functionsWithNamespace__[o][_],delete this.__functionsWithNamespace__[o][_];break}if(!this[_])return}this[_].returnPointerType=t,this[_].glue=this,this[_]=this.invokeFunction.bind(this[_])}},{key:"exportToWasm",value:function(e,r){this.__exportsToWasm__[e]=this.invokeExportedFunction.bind(r)}},{key:"onMemoryGrowth",value:function(e){this.linearMemory=this.wasmInstance.exports.memory.buffer,this.__memorygrowview__.buffer.byteLength<1&&this.updateMemoryViews(),this.logMemory()}},{key:"consolelog",value:function(e,r){console.log(this.toString(e,r))}},{key:"loadFromArrayBuffer",value:function(){var e=Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(r){var t,_=this,o=arguments;return _Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:null,this.wasmCode=r,e.next=4,WebAssembly.instantiate(r,{wasi_snapshot_preview1:this.wasi,env:this.__exportsToWasm__}).then((function(e){_.wasmInstance=e.instance,_.wasmInstance.exports._initialize(),_.__functions__=_.wasmInstance.exports,_.linearMemory=_.wasmInstance.exports.memory.buffer,_.__memorygrowpointer__=_.__functions__.__malloc__(16),_.__memorygrowview__=new Uint8Array(_.linearMemory,_.__memorygrowpointer__,16),_.__functionsWithNamespace__={};var r=_.__functions__.__malloc__(1024),o=new Uint8Array(_.linearMemory,_.__functions__.__malloc__(1024),1024);for(var n in _.__functions__)if("__demangle__"!=n){var a=_.__functions__.__demangle__(_.toWASMString(n,o),r);if(a>0){var s=_.toString(r,a),i=s.indexOf("(");i>0&&(s=s.substring(0,i));var u=s.lastIndexOf("::");u>0&&(u=s.lastIndexOf("::",u-1))>0&&(s=s.substr(u+2));var c=s.split("::",2);2==c.length&&(_.__functionsWithNamespace__[c[0]]||(_.__functionsWithNamespace__[c[0]]={}),_.__functionsWithNamespace__[c[0]][c[1]]=_.__functions__[n]),_[s]=_.__functions__[n]}else _[n]=_.__functions__[n]}_.free(r),_.free(o.byteOffset),_.__functions__.__initialize__(),delete _.__functionsWithNamespace__,_.logMemory(),_.__classUnderConstruction__=null,null!=t&&t.afterWASMLoaded()}));case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"toString",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=null;if(r<1){var _=this.linearMemory.byteLength-e;for(_>16384&&(_=16384),t=new Uint8Array(this.linearMemory,e,_),r=0;r<_&&0!=t[r];r++);}else t=new Uint8Array(this.linearMemory,e,r);for(var o,n,a,s,i="",u=0;u<r;){if(n=a=0,(o=t[u])<=127?(n=0,a=255&o):o<=223?(n=1,a=31&o):o<=239?(n=2,a=15&o):o<=244&&(n=3,a=7&o),r-u-n>0)for(s=0;s<n;)a=a<<6|63&(o=t[u+s+1]),s+=1;else a=65533,n=r-u;i+=String.fromCodePoint(a),u+=n+1}return i}},{key:"toWASMString",value:function(e){var r,t,_,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.length,a=0,s=0,i=4*n+1;for(null==o&&(o=new Uint8Array(this.linearMemory,this.malloc(i),i));a<n;){for(t=_=0,(r=e.codePointAt(a))<=127?(t=0,_=0):r<=2047?(t=6,_=192):r<=65535?(t=12,_=224):r<=2097151&&(t=18,_=240),o[s++]=_|r>>t,t-=6;t>=0;)o[s++]=128|r>>t&63,t-=6;a+=r>=65536?2:1}return o[s]=0,o.byteOffset}},{key:"logMemory",value:function(){var e="WASM memory "+this.id+": "+this.niceSize(this.__functions__.__stacksize__())+" stack, "+this.niceSize(this.linearMemory.byteLength-this.__functions__.__heapbase__())+" heap, "+this.niceSize(this.linearMemory.byteLength)+" total.";console.log(e),console.log(memoryUsageListener),memoryUsageListener&&memoryUsageListener(e)}},{key:"malloc",value:function(e){var r=this.__functions__.__malloc__(e);return this.__memorygrowview__.buffer.byteLength<1&&this.updateMemoryViews(),r}},{key:"updateMemoryViews",value:function(){var e,r=Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__.a)(this.__views__);try{for(r.s();!(e=r.n()).done;){var t=e.value;this.updateBuffer(t,this.linearMemory)}}catch(_){r.e(_)}finally{r.f()}this.__memorygrowview__=new Uint8Array(this.linearMemory,this.__memorygrowpointer__,16)}},{key:"free",value:function(e){this.__functions__.__free__(e)}},{key:"setInt64",value:function(e,r,t){this.__functions__.__setint64__(e,r,t)}},{key:"bufferToWASM",value:function(e,r){var t=null,_=null;"function"===typeof r.getChannelData?(t=r.getChannelData(0),_=r.getChannelData(1)):(t=r[0][0],_=r[0][1]);for(var o=0,n=0;o<e.array.length;o++,n++)e.array[o++]=t[n],e.array[o]=_[n]}},{key:"bufferToJS",value:function(e,r){var t=null,_=null;"function"===typeof r.getChannelData?(t=r.getChannelData(0),_=r.getChannelData(1)):(t=r[0][0],_=r[0][1]);for(var o=0,n=0;o<e.array.length;o++,n++)t[n]=e.array[o++],_[n]=e.array[o]}},{key:"arrayBufferToWASM",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=this.malloc(e.byteLength+r);return new Uint8Array(this.linearMemory).set(new Uint8Array(e,0,e.byteLength),t+r),t}},{key:"copyWASMToArrayBuffer",value:function(e,r){var t=new ArrayBuffer(r);return new Uint8Array(t,0,r).set(new Uint8Array(this.linearMemory,e,r)),t}},{key:"moveWASMToArrayBuffer",value:function(e,r){var t=this.copyWASMToArrayBuffer(e,r);return this.free(e),t}}],[{key:"fetch",value:function(e){function r(r){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}(function(){var e=Object(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__.a)(_Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function e(r){var t;return _Users_tomdodds_Workspace_Synervoz_3FireMusic_bimmPlayer_superpowered_examples_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new SuperpoweredGlue,e.next=3,fetch(r).then((function(e){return e.arrayBuffer()})).then((function(e){return t.loadFromArrayBuffer(e)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},{key:"registerMemoryUsageListener",value:function(e){console.log("regiseing listener"),memoryUsageListener=e}}]),SuperpoweredGlue}();"object"===typeof exports&&"object"===typeof module?module.exports=SuperpoweredGlue:"function"===typeof define&&__webpack_require__(38)?define([],(function(){return SuperpoweredGlue})):"object"===typeof exports&&(exports.SuperpoweredGlue=SuperpoweredGlue)}).call(this,__webpack_require__(37)(module))},25:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return n}));var _=t(6),o=t(15),n=function(){function e(r){Object(_.a)(this,e),this.receiver="undefined"!==typeof r.port?r.port:r,"undefined"!==typeof r.terminate&&r.addEventListener("message",this.onmessage)}return Object(o.a)(e,[{key:"onmessage",value:function(e){return"string"===typeof e.data.SuperpoweredLoad&&(this.load(e.data.SuperpoweredLoad),!0)}},{key:"load",value:function(e){var r=new Worker("./superpowered/SuperpoweredTrackLoaderWorker.js");r.__url__=e,r.ontransfer=function(e){this.transfer(e.transfer,r)}.bind(this),r.onmessage=function(e){this.transfer(e.data.__transfer__,r)}.bind(this),r.postMessage({load:r.__url__})}},{key:"transfer",value:function(e,r){"function"===typeof this.receiver.postMessage?this.receiver.postMessage({SuperpoweredLoaded:{buffer:e,url:r.__url__}},[e]):this.receiver({SuperpoweredLoaded:{buffer:e,url:r.__url__}}),r.terminate()}}],[{key:"downloadAndDecode",value:function(r,t){"function"===typeof t.onMessageFromMainScope&&"function"===typeof t.sendMessageToMainScope?t.sendMessageToMainScope({SuperpoweredLoad:r}):new e(t).load(r)}}]),e}();"object"===typeof exports&&"object"===typeof e?e.exports={SuperpoweredTrackLoader:n}:"function"===typeof define&&t(38)?define([],(function(){return{SuperpoweredTrackLoader:n}})):"object"===typeof exports&&(exports.SuperpoweredTrackLoader={SuperpoweredTrackLoader:n})}).call(this,t(37)(e))},39:function(e,r,t){"use strict";(function(e){t.d(r,"b",(function(){return h}));var _=t(31),o=t(40),n=t(43),a=t(44),s=t(12),i=t.n(s),u=t(24),c=t(17),l=t(6),p=t(15),d=t(19);t.d(r,"a",(function(){return d.a}));var m=t(25),f=!1,h=function(){function e(r,t){Object(l.a)(this,e),(f=navigator.userAgent.indexOf("AppleWebKit")>-1||navigator.userAgent.indexOf("Firefox")>-1)&&navigator.userAgent.indexOf("Chrome")>-1&&(f=!1),this.Superpowered=t,this.audioContext=null;var _=window.AudioContext||window.webkitAudioContext||!1,o=new _;o.sampleRate<r&&(o.close(),o=new _({sampleRate:r})),this.audioContext=o}return Object(p.a)(e,[{key:"getUserMediaForAudio",value:function(e,r,t){var _={};if(navigator.mediaDevices){var o=navigator.mediaDevices.getSupportedConstraints();for(var n in o)o.hasOwnProperty(n)&&void 0!==e[n]&&(_[n]=e[n])}if(_.audio=!0,_.video=!1,navigator.fastAndTransparentAudio=e.hasOwnProperty("fastAndTransparentAudio")&&!0===e.fastAndTransparentAudio,navigator.fastAndTransparentAudio&&(_.echoCancellation=!1,_.disableLocalEcho=!1,_.autoGainControl=!1,_.audio={mandatory:{googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googEchoCancellation2:!1,googNoiseSuppression2:!1,googDAEchoCancellation:!1,googNoiseReduction:!1}}),navigator.getUserMediaMethod=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMediaMethod)navigator.getUserMediaMethod(_,r,t);else{var a=null,s=!1;try{a=navigator.mediaDevices.getUserMedia}catch(i){"https"!=location.protocol.toLowerCase()&&"localhost"!=location.hostname.toLowerCase()?t("Web Audio requires a secure context (HTTPS or localhost)."):t(i),s=!0}s||(a?navigator.mediaDevices.getUserMedia(_).then(r).catch(t):t("Can't access getUserMedia."))}}},{key:"registerUsageHander",value:function(e){d.a.registerMemoryUsageListener(e)}},{key:"getUserMediaForAudioAsync",value:function(){var e=Object(c.a)(i.a.mark((function e(r){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,_){t.getUserMediaForAudio(r,(function(r){if(navigator.fastAndTransparentAudio){var t,_=r.getAudioTracks(),o=Object(u.a)(_);try{for(o.s();!(t=o.n()).done;){t.value.applyConstraints({autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1})}}catch(n){o.e(n)}finally{o.f()}}e(r)}),_)})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"createAudioNodeAsync",value:function(){var e=Object(c.a)(i.a.mark((function e(r,t,_){var o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){o.createAudioNode(r,t,e,_)})));case 1:case"end":return e.stop()}}),e)})));return function(r,t,_){return e.apply(this,arguments)}}()},{key:"createAudioNode",value:function(e,r,t,_){var s=this;f||"function"!==typeof AudioWorkletNode?import(e).then((function(e){var r=s.audioContext.createScriptProcessor(1024,2,2);r.samplerate=s.audioContext.sampleRate,r.inputBuffer=s.Superpowered.createFloatArray(2048),r.outputBuffer=s.Superpowered.createFloatArray(2048),r.processor=new e.default(s.Superpowered,_,r.samplerate),r.sendMessageToAudioScope=function(e){r.processor.onMessageFromMainScope(e)},r.destruct=function(){r.processor.onDestruct()},r.onaudioprocess=function(e){r.processor.Superpowered.bufferToWASM(r.inputBuffer,e.inputBuffer),r.processor.processAudio(r.inputBuffer,r.outputBuffer,r.inputBuffer.array.length/2),r.processor.Superpowered.bufferToJS(r.outputBuffer,e.outputBuffer)},t(r)})):this.audioContext.audioWorklet.addModule(e).then((function(){var e=new(function(e){Object(o.a)(t,e);var r=Object(n.a)(t);function t(e,_){return Object(l.a)(this,t),r.call(this,e.audioContext,_,{processorOptions:{wasmCode:e.Superpowered.wasmCode,samplerate:e.audioContext.sampleRate,maxChannels:e.Superpowered.__maxChannels__},outputChannelCount:[2]})}return Object(p.a)(t,[{key:"sendMessageToAudioScope",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.port.postMessage(e,r)}},{key:"destruct",value:function(){this.port.postMessage("___superpowered___destruct___")}}]),t}(Object(a.a)(AudioWorkletNode)))(s,r);e.loader=new m.a(e),e.onReadyCallback=t,e.onMessageFromAudioScope=_,e.port.onmessage=function(r){e.loader.onmessage(r)||("___superpowered___onready___"==r.data?e.onReadyCallback(e):e.onMessageFromAudioScope(r.data))}.bind(e)}))}}]),e}();if(f||"function"!==typeof AudioWorkletProcessor){var y=function(){function e(r,t,_){Object(l.a)(this,e),this.onMessageFromAudioScope=null,this.loader=new m.a(this),this.Superpowered=r,this.samplerate=_,this.onMessageFromAudioScope=t,this.onReady()}return Object(p.a)(e,[{key:"onReady",value:function(){}},{key:"onDestruct",value:function(){}},{key:"onMessageFromMainScope",value:function(e){}},{key:"sendMessageToMainScope",value:function(e){this.loader.onmessage({data:e})||this.onMessageFromAudioScope(e)}},{key:"postMessage",value:function(e){this.onMessageFromMainScope(e)}},{key:"processAudio",value:function(e,r){}}]),e}();h.AudioWorkletProcessor=y}else{var b=function(e){Object(o.a)(t,e);var r=Object(n.a)(t);function t(e){var o;return Object(l.a)(this,t),o=r.call(this),d.a.__uint_max__sp__=e.processorOptions.maxChannels,o.state=0,o.port.onmessage=function(e){"___superpowered___destruct___"==e.data?(o.state=-1,o.onDestruct()):o.onMessageFromMainScope(e.data)},o.samplerate=e.processorOptions.samplerate,o.Superpowered=new d.a,o.Superpowered.loadFromArrayBuffer(e.processorOptions.wasmCode,Object(_.a)(o)),o}return Object(p.a)(t,[{key:"afterWASMLoaded",value:function(){this.Superpowered.Initialize(),this.inputBuffer=this.Superpowered.createFloatArray(256),this.outputBuffer=this.Superpowered.createFloatArray(256),this.onReady(),this.port.postMessage("___superpowered___onready___"),this.state=1}},{key:"onReady",value:function(){}},{key:"onDestruct",value:function(){}},{key:"onMessageFromMainScope",value:function(e){}},{key:"sendMessageToMainScope",value:function(e){this.port.postMessage(e)}},{key:"processAudio",value:function(e,r){}},{key:"process",value:function(e,r,t){return!(this.state<0)&&(1==this.state&&(e[0].length>1&&this.Superpowered.bufferToWASM(this.inputBuffer,e),this.processAudio(this.inputBuffer,this.outputBuffer,this.inputBuffer.array.length/2,t),r[0].length>1&&this.Superpowered.bufferToJS(this.outputBuffer,r)),!0)}}]),t}(Object(a.a)(AudioWorkletProcessor));h.AudioWorkletProcessor=b}"object"===typeof exports&&"object"===typeof e?e.exports={SuperpoweredGlue:d.a,SuperpoweredWebAudio:h,SuperpoweredTrackLoader:m.a}:"function"===typeof define&&t(38)?define([],(function(){return{SuperpoweredGlue:SuperpoweredGlue,SuperpoweredWebAudio:h,SuperpoweredTrackLoader:SuperpoweredTrackLoader}})):"object"===typeof exports&&(exports.SuperpoweredModule={SuperpoweredGlue:d.a,SuperpoweredWebAudio:h,SuperpoweredTrackLoader:m.a})}).call(this,t(37)(e))},51:function(e){e.exports=JSON.parse('{"name":"superpowered-examples","homepage":"/superpowered-examples/","version":"0.1.0","private":true,"dependencies":{"@emotion/react":"^11.6.0","@emotion/styled":"^11.6.0","@mui/icons-material":"^5.2.0","@mui/material":"^5.2.0","@mui/styled-engine":"npm:@mui/styled-engine-sc@latest","@mui/styled-engine-sc":"^5.1.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","gh-pages":"^3.2.3","react":"^17.0.2","react-dom":"^17.0.2","react-scripts":"4.0.3","styled-components":"^5.3.3","web-vitals":"^1.0.1"},"resolutions":{"@mui/styled-engine":"npm:@mui/styled-engine-sc@latest"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},63:function(e,r,t){},72:function(e,r,t){},73:function(e,r,t){"use strict";t.r(r);var _=t(0),o=t.n(_),n=t(46),a=t.n(n),s=(t(63),t(5)),i=t(10),u=t(12),c=t.n(u),l=t(17),p=t(39),d=t(91),m=t(89),f=t(3),h=function(){var e=Object(_.useRef)(),r=Object(_.useRef)(),t=Object(_.useState)(!1),o=Object(i.a)(t,2),n=o[0],a=o[1],s=Object(_.useState)(!1),u=Object(i.a)(s,2),h=u[0],y=u[1],b=Object(_.useState)("Downloading assets and decoding...."),g=Object(i.a)(b,2),v=g[0],w=g[1];Object(_.useEffect)((function(){M()}),[]);var M=function(){var t=Object(l.a)(c.a.mark((function t(){var _;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.fetch("/superpowered-examples/superpowered/superpowered.wasm");case 2:return(_=t.sent).Initialize({licenseKey:"ExampleLicenseKey-WillExpire-OnNextUpdate",enableAudioAnalysis:!0,enableFFTAndFrequencyDomain:!0,enableAudioTimeStretching:!0,enableAudioEffects:!0,enableAudioPlayerAndDecoder:!0,enableCryptographics:!1,enableNetworking:!1}),e.current=new p.b(48e3,_),t.next=7,e.current.createAudioNodeAsync("/superpowered-examples/processorScripts/MultitrackPlayerDemoProcessor.js","MultitrackPlayerDemoProcessor",k);case 7:r.current=t.sent,r.current.connect(e.current.audioContext.destination),r.current.onprocessorerror=function(e){console.error(e)},O();case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(e){"assetsLoaded"===e.event&&(a(!0),w("Assets loaded and read to play! This song stores around 110MB of decoded audio into RAM."))},O=function(){r.current.sendMessageToAudioScope({type:"command",payload:{id:"loadPlayerAssets",assets:[{url:"/superpowered-examples/audio/1205/Choir_Christmas_coventry_carol_Alto.mp4"},{url:"/superpowered-examples/audio/1205/Choir_Christmas_coventry_carol_BAND.mp4"},{url:"/superpowered-examples/audio/1205/Choir_Christmas_coventry_carol_bass.mp4"},{url:"/superpowered-examples/audio/1205/Choir_Christmas_coventry_carol_Soprano.mp4"},{url:"/superpowered-examples/audio/1205/Choir_Christmas_coventry_carol_Tenor.mp4"}]}})};return Object(f.jsxs)(d.a,{sx:{padding:"10px 20px",borderRadius:"15px",width:"80%",marginBottom:"10px"},children:[Object(f.jsx)("h4",{style:{maxWidth:400,margin:"20px auto"},children:v}),n&&Object(f.jsx)(m.a,{variant:"contained",disabled:!n,onClick:function(){return y(!h),w(h?"Paused":"Playing. Merry Christmas!"),e.current.audioContext.resume(),void r.current.sendMessageToAudioScope({type:"command",payload:{id:h?"stopPlayback":"startPlayback"}})},children:"Play/Pause"})]})},y=t(51),b=(t(72),function(){var e=Object(_.useState)(!1),r=Object(i.a)(e,2),t=r[0],o=r[1];return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("main",{children:[Object(f.jsxs)("h1",{style:Object(s.a)({margin:0,display:"flex"},"margin",10),children:[Object(f.jsx)("img",{src:"images/navbar-logo.svg",style:{height:50,marginRight:20},alt:"3 Fire Music logo"}),"Superpowered demo"]}),Object(f.jsxs)("small",{children:["v",y.version]}),t&&Object(f.jsx)(h,{}),!t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{style:{maxWidth:400},children:["The following demo uses Superpowered to download, decode and schedule 5 channels of stereo audio in WebAssembly.",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"There is one more optimisation that can be applied for iOS where the audio scheduling and UI threads are seperated, but this will come later."]}),Object(f.jsx)(m.a,{variant:"contained",onClick:function(){return o(!0)},children:"Download and decode assets"})]})]})})}),g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,93)).then((function(r){var t=r.getCLS,_=r.getFID,o=r.getFCP,n=r.getLCP,a=r.getTTFB;t(e),_(e),o(e),n(e),a(e)}))},v=t(52),w=t(92),M=Object(v.a)({palette:{primary:{main:"#1253FF"}}});a.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(w.a,{theme:M,children:Object(f.jsx)(b,{})})}),document.getElementById("root")),g()}},[[73,1,2]]]);
//# sourceMappingURL=main.d26d435e.chunk.js.map